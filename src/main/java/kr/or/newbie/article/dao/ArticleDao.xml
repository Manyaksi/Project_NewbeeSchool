<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.newbie.article.dao.ArticleDao">
	<!--  게시글 리스트 -->
	<select id="showarticleList" resultType="java.util.Map" parameterType="String">
		select a.article_no,u.nickname, a.program_name, a.subject, a.content, a.category, TO_CHAR(write_date,'YY/MM/DD HH24: MI') write, a.hit_count, a.like_count, a.notice
        from users u JOIN article a
        on a.user_no = u.user_no
        where a.program_name like #{program_name}
        order by article_no asc
	</select>
	
	<!--  카테고리별 리스트 -->
	<select id="showcategoryList" resultType="java.util.Map" parameterType="java.util.Map" >
		select a.article_no,u.nickname, a.program_name, a.subject, a.content, a.category, TO_CHAR(write_date,'YY/MM/DD HH24: MI') write, a.hit_count, a.like_count, a.notice
        from users u JOIN article a
        on a.user_no = u.user_no
        where a.category like #{category} AND a.program_name like #{program_name}
        order by article_no asc
	</select>
	
	<!--  **순 별로 리스트 보기 -->
	<select id="orderbyList" resultType="java.util.Map" parameterType="java.util.Map">
	 	select a.article_no,u.nickname, a.program_name, a.subject, a.content, a.category, TO_CHAR(write_date,'YY/MM/DD HH24: MI') write, a.hit_count hit_count, a.like_count, a.notice
        from users u JOIN article a
        on a.user_no = u.user_no
        where a.category like #{category} AND a.program_name like #{program_name}
        order by #{orderby} desc
	</select>
	
	<!--  게시글 상세보기 -->
	<select id="detailArticle" resultType="article" parameterType="Integer">
	select article_no, user_no, program_name, subject, content, category, TO_CHAR(write_date,'YY/MM/DD HH24: MI') write_date, hit_count, like_count, notice
	from article
	where article_no = #{article_no}
	</select>

	<!--  히트 카운트 증가 -->
	<select id="hitcountArticle" parameterType="Integer">
	update article
	set hit_count = hit_count+1
	where article_no = #{article_no}
	</select>
	
	<!-- 좋아요! -->
	<select id="likecountArticle" parameterType="Integer">
	update article
	set like_count = like_count+1
	where article_no = #{article_no}
	</select>
	
	
	


</mapper>